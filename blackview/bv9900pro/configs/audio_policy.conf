# Copyright (C) 2024 Blackview BV9900Pro Device Tree
# Licensed under the Apache License, Version 2.0

# Audio policy configuration for Blackview BV9900Pro
# Based on MediaTek MT6779 platform

# Global configuration
global_configuration {
    attached_output_devices AUDIO_DEVICE_OUT_EARPIECE|AUDIO_DEVICE_OUT_SPEAKER|AUDIO_DEVICE_OUT_WIRED_HEADSET|AUDIO_DEVICE_OUT_WIRED_HEADPHONE|AUDIO_DEVICE_OUT_BLUETOOTH_SCO|AUDIO_DEVICE_OUT_BLUETOOTH_A2DP|AUDIO_DEVICE_OUT_USB_DEVICE
    default_output_device AUDIO_DEVICE_OUT_SPEAKER
    attached_input_devices AUDIO_DEVICE_IN_BUILTIN_MIC|AUDIO_DEVICE_IN_WIRED_HEADSET|AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET|AUDIO_DEVICE_IN_USB_DEVICE
    speaker_drc_enabled true
}

# Hardware modules
audio_hw_modules {
    primary {
        outputs {
            primary {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_OUT_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_OUT_EARPIECE|AUDIO_DEVICE_OUT_SPEAKER|AUDIO_DEVICE_OUT_WIRED_HEADSET|AUDIO_DEVICE_OUT_WIRED_HEADPHONE|AUDIO_DEVICE_OUT_BLUETOOTH_SCO|AUDIO_DEVICE_OUT_BLUETOOTH_A2DP|AUDIO_DEVICE_OUT_USB_DEVICE
                flags AUDIO_OUTPUT_FLAG_PRIMARY
            }
        }
        inputs {
            primary {
                sampling_rates 8000|11025|16000|22050|32000|44100|48000
                channel_masks AUDIO_CHANNEL_IN_MONO|AUDIO_CHANNEL_IN_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_IN_BUILTIN_MIC|AUDIO_DEVICE_IN_WIRED_HEADSET|AUDIO_DEVICE_IN_BLUETOOTH_SCO_HEADSET|AUDIO_DEVICE_IN_USB_DEVICE
            }
        }
    }
    r_submix {
        outputs {
            submix {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_OUT_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_OUT_REMOTE_SUBMIX
            }
        }
        inputs {
            submix {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_IN_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_IN_REMOTE_SUBMIX
            }
        }
    }
    usb {
        outputs {
            usb_accessory {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_OUT_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_OUT_USB_ACCESSORY
            }
            usb_device {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_OUT_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_OUT_USB_DEVICE
            }
        }
        inputs {
            usb_accessory {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_IN_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_IN_USB_ACCESSORY
            }
            usb_device {
                sampling_rates 44100|48000
                channel_masks AUDIO_CHANNEL_IN_STEREO
                formats AUDIO_FORMAT_PCM_16_BIT
                devices AUDIO_DEVICE_IN_USB_DEVICE
            }
        }
    }
}

# Routes
routes {
    primary {
        # Speaker
        speaker {
            outputs primary
            device AUDIO_DEVICE_OUT_SPEAKER
        }
        # Earpiece
        earpiece {
            outputs primary
            device AUDIO_DEVICE_OUT_EARPIECE
        }
        # Wired headset
        headset {
            outputs primary
            device AUDIO_DEVICE_OUT_WIRED_HEADSET
        }
        # Wired headphone
        headphone {
            outputs primary
            device AUDIO_DEVICE_OUT_WIRED_HEADPHONE
        }
        # Bluetooth SCO
        bt_sco {
            outputs primary
            device AUDIO_DEVICE_OUT_BLUETOOTH_SCO
        }
        # Bluetooth A2DP
        bt_a2dp {
            outputs primary
            device AUDIO_DEVICE_OUT_BLUETOOTH_A2DP
        }
        # USB device
        usb_device {
            outputs usb_device
            device AUDIO_DEVICE_OUT_USB_DEVICE
        }
    }
    r_submix {
        # Remote submix
        submix {
            outputs submix
            device AUDIO_DEVICE_OUT_REMOTE_SUBMIX
        }
    }
    usb {
        # USB accessory
        usb_accessory {
            outputs usb_accessory
            device AUDIO_DEVICE_OUT_USB_ACCESSORY
        }
        # USB device
        usb_device {
            outputs usb_device
            device AUDIO_DEVICE_OUT_USB_DEVICE
        }
    }
}

# Volume
volume {
    # Speaker volume
    speaker {
        device AUDIO_DEVICE_OUT_SPEAKER
        index 0
        min 0
        max 100
        default 60
    }
    # Earpiece volume
    earpiece {
        device AUDIO_DEVICE_OUT_EARPIECE
        index 0
        min 0
        max 100
        default 60
    }
    # Headset volume
    headset {
        device AUDIO_DEVICE_OUT_WIRED_HEADSET
        index 0
        min 0
        max 100
        default 60
    }
    # Headphone volume
    headphone {
        device AUDIO_DEVICE_OUT_WIRED_HEADPHONE
        index 0
        min 0
        max 100
        default 60
    }
    # Bluetooth SCO volume
    bt_sco {
        device AUDIO_DEVICE_OUT_BLUETOOTH_SCO
        index 0
        min 0
        max 100
        default 60
    }
    # Bluetooth A2DP volume
    bt_a2dp {
        device AUDIO_DEVICE_OUT_BLUETOOTH_A2DP
        index 0
        min 0
        max 100
        default 60
    }
    # USB device volume
    usb_device {
        device AUDIO_DEVICE_OUT_USB_DEVICE
        index 0
        min 0
        max 100
        default 60
    }
}
